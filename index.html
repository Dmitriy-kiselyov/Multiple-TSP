<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Genetic</title>
    <link rel="stylesheet" href="lib/bootstrap.min.css">
    <link rel="stylesheet" href="lib/slider/rangeslider.css">
    <script src="lib/jquery-3.2.1.min.js"></script>
    <script src="lib/slider/rangeslider.min.js"></script>

    <script src="src/util.js"></script>
    <script src="src/PointsGenerator.js"></script>
    <script src="src/MatrixConverter.js"></script>
    <script src="src/TspGenetic.js"></script>
    <script src="src/Selection.js"></script>
    <script src="src/Crossover.js"></script>
    <script src="src/Mutation.js"></script>
    <script src="js/genetic.js"></script>
</head>

<body class="container p-0">

<h2 class="text-center mt-2 mb-4">TSP: Genetic algorithm</h2>

<div class="row">
    <div class="col-auto">
        <canvas id="canvas" width="800" height="600" style="border: 1px solid ; border-radius: 20px"></canvas>
    </div>
    <div class="col d-flex align-items-start flex-column">
        <div class="row">
            <fieldset class="form-group">
                <legend>Points</legend>
                <div class="row m-0">
                    <label class="form-check-label col">
                        <input type="radio" class="form-check-input" value="50" name="points" checked> 50
                    </label>
                    <label class="form-check-label col">
                        <input type="radio" class="form-check-input" value="100" name="points"> 100
                    </label>
                    <label class="form-check-label col">
                        <input type="radio" class="form-check-input" value="150" name="points"> 150
                    </label>
                    <label class="form-check-label col">
                        <input type="radio" class="form-check-input" value="200" name="points"> 200
                    </label>
                    <label class="form-check-label col">
                        <input type="radio" class="form-check-input" value="500" name="points"> 500
                    </label>
                    <label class="form-check-label col">
                        <input type="radio" class="form-check-input" value="1000" name="points"> 1000
                    </label>
                </div>
            </fieldset>
        </div>

        <div class="row">
            <legend>Settings</legend>
            <div class="form-group">
                <label class="form-check-label col">
                    <input type="checkbox" class="form-check-input" name="elitism" id="elitism" checked> Elitism
                </label>
            </div>
        </div>

        <div class="row w-100">
            <div class="form-group w-100">
                <label>Population</label>
                <span style="font-weight: bolder">=</span>
                <span style="font-weight: bolder" id="population-hint">30</span>
                <input type="range" id="population" min="10" max="200" value="30">
            </div>
        </div>

        <div class="row">
            <div class="form-group">
                <legend>Selection</legend>
                <select class="form-control" id="selection">
                    <option selected value="tournament">Tournament</option>
                    <option value="roulette">Roulette</option>
                </select>
            </div>
        </div>

        <div class="row">
            <div class="form-group">
                <legend>Crossover</legend>
                <select class="form-control" id="crossover">
                    <option value="segment">Segment</option>
                    <option value="random_half">Random Half</option>
                    <option selected value="prev_next">Previous/Next</option>
                </select>
            </div>
        </div>

        <div class="row">
            <div class="form-group">
                <legend>Mutation</legend>
                <select class="form-control" id="mutation">
                    <option value="fisher">Fisher Yates</option>
                    <option selected value="reverse">Reverse</option>
                    <option value="segment">Segment</option>
                </select>
            </div>
        </div>

        <div class="row w-100">
            <div class="form-group w-100">
                <label>Mutation rate</label>
                <span style="font-weight: bolder">=</span>
                <span style="font-weight: bolder" id="mutation_rate-hint">0.015</span>
                <input type="range" id="mutation_rate" min="0" max="1" step="0.005" value="0.015">
            </div>
        </div>

        <div class="row mt-auto w-100">
            <div class="col p-0 text-center">
                <input type="button" class="btn btn-sm m-1" id="start" value="Start">
                <input type="button" class="btn btn-sm m-1" id="reset" value="Reset">
            </div>
        </div>

    </div>
</div>

<div class="row" id="stat">
    <div class="col-12">
        <span>Итерация: </span>
        <span id="stat-iter"></span>;

        <span style="font-weight: bold"> Расстояние: </span>
        <span style="font-weight: bold" id="stat-dist"></span>;

        <span> Среднее&nbsp;расстояние: </span>
        <span id="stat-aver_dist"></span>;

        <span> Новых&nbsp;путей: </span>
        <span id="stat-change_count"></span>;

        <span> Без&nbsp;новых&nbsp;путей: </span>
        <span id="stat-no_change"></span>;

        <span> Повторяющихся&nbsp;путей: </span>
        <span id="stat-same_path"></span>;

        <span> Мутаций: </span>
        <span id="stat-mutations"></span>;

    </div>
</div>

<script>
    $('input[type="range"]').rangeslider({
        polyfill: false,
        onSlide: function (pos, value) {
            let id = this.$element.attr("id") + "-hint";
            $("#" + id).text(value);
        }
    });
</script>

</body>

</html>